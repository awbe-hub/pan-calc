<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pan Size Converter — sourdough.bake</title>
<style>
  :root{
    --bg:#F7F1E8; --card:#F1E8DC; --ink:#3E2B1F; --muted:#7A6657; --brand:#B68655;
    --radius:14px;
  }
  html,body{margin:0;background:var(--bg);color:var(--ink);font:500 16px/1.35 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;}
  .wrap{max-width:880px;margin:22px auto;padding:0 14px;}
  h1{font:700 26px/1.2 ui-serif,Georgia,serif;margin:0 0 6px}
  p.lead{margin:0 0 18px;color:var(--muted)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin:10px 0 12px}
  @media (max-width:760px){.row{grid-template-columns:1fr}}
  .card{background:var(--card);border:1px solid #e8dfd4;border-radius:var(--radius);padding:14px}
  .card h3{margin:0 0 8px;font-size:15px;letter-spacing:.02em;text-transform:uppercase}
  label{display:block;font-size:13px;margin:10px 0 6px;color:var(--muted)}
  select,input{width:100%;box-sizing:border-box;padding:10px 11px;border-radius:10px;border:1px solid #e0d6ca;background:#fff;color:var(--ink);font:500 15px/1.2 system-ui}
  .inline{display:grid;grid-template-columns:1fr 140px;gap:10px}
  .unit{display:flex;gap:8px;align-items:center;justify-content:flex-end;margin:4px 0 8px}
  .chip{border:1px solid #e0d6ca;border-radius:18px;padding:7px 10px;cursor:pointer;color:var(--muted)}
  .chip.active{background:var(--brand);border-color:var(--brand);color:#fff}
  .actions{display:grid;grid-template-columns:1fr 160px;gap:10px;margin-top:6px}
  .btn{background:var(--brand);color:#fff;border:0;border-radius:12px;padding:12px 14px;font-weight:700;cursor:pointer}
  .btn.secondary{background:#e8dfd4;color:var(--ink)}
  .result{background:#ffffff;border:1px dashed #d8cab8;border-radius:var(--radius);padding:14px;margin-top:12px}
  .k{color:#1a7f37;font-weight:800}
  .small{color:var(--muted);font-size:13px}
  footer{margin:18px 0 8px;color:var(--muted);font-size:12px;text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Pan Size Converter</h1>
    <p class="lead">Keep the same height & structure when you change pan size. Works for cakes, pies, bars, casseroles, etc.</p>

    <div class="unit" aria-label="Units">
      <span>Units:</span>
      <button class="chip active" id="u-in">in</button>
      <button class="chip" id="u-cm">cm</button>
    </div>

    <div class="row">
      <div class="card">
        <h3>In the recipe</h3>
        <label>Shape</label>
        <select id="src-shape">
          <option value="round">Round</option>
          <option value="square">Square</option>
          <option value="rect">Rectangle</option>
        </select>

        <div id="src-fields">
          <!-- dynamic fields go here -->
        </div>

        <label>Popular sizes</label>
        <select id="src-preset">
          <!-- options injected based on shape -->
        </select>
      </div>

      <div class="card">
        <h3>My pan</h3>
        <label>Shape</label>
        <select id="dst-shape">
          <option value="round">Round</option>
          <option value="square">Square</option>
          <option value="rect">Rectangle</option>
        </select>

        <div id="dst-fields"></div>

        <label>Popular sizes</label>
        <select id="dst-preset"></select>
      </div>
    </div>

    <div class="actions">
      <button class="btn" id="calc">Calculate</button>
      <button class="btn secondary" id="clear">Reset</button>
    </div>

    <div class="result" id="out" hidden>
      <div><strong>Scale factor = <span class="k" id="k">1.00</span></strong></div>
      <div>To keep the same height and structure as in the original recipe, multiply <strong>all ingredients</strong> by <strong id="k2">1.00</strong>.</div>
      <div class="small" id="exact"></div>
    </div>

    <footer>© sourdough.bake • Pan converter</footer>
  </div>

<script>
  // ---------- utilities ----------
  const state = { unit:'in' }; // default inches

  const byId = id => document.getElementById(id);

  const presets = {
    round: ['Custom…','6"','7"','8"','9"','10"','11"','12"'],
    square:['Custom…','8×8"','9×9"','10×10"'],
    rect:  ['Custom…','13×9"','11×7"','15×10"']
  };

  function inToCm(v){ return v*2.54 }
  function cmToIn(v){ return v/2.54 }

  // area calculators (units-agnostic if consistent)
  const area = {
    round: ({d}) => Math.PI * Math.pow(d/2,2),
    square: ({a}) => a*a,
    rect: ({w,h}) => w*h
  };

  // build fields for shape
  function buildFields(side, shape){
    const host = byId(side+'-fields');
    host.innerHTML = '';
    if(shape==='round'){
      host.insertAdjacentHTML('beforeend', `
        <label>Diameter</label>
        <input id="${side}-d" type="number" inputmode="decimal" placeholder="e.g. 8">
      `);
    }else if(shape==='square'){
      host.insertAdjacentHTML('beforeend', `
        <label>Side</label>
        <input id="${side}-a" type="number" inputmode="decimal" placeholder="e.g. 8">
      `);
    }else{
      host.insertAdjacentHTML('beforeend', `
        <div class="inline">
          <div>
            <label>Width</label>
            <input id="${side}-w" type="number" inputmode="decimal" placeholder="e.g. 13">
          </div>
          <div>
            <label>Height</label>
            <input id="${side}-h" type="number" inputmode="decimal" placeholder="e.g. 9">
          </div>
        </div>
      `);
    }
    buildPreset(side, shape);
  }

  // build preset dropdown
  function buildPreset(side, shape){
    const sel = byId(side+'-preset');
    sel.innerHTML = presets[shape].map((t,i)=>`<option value="${t}" ${i===0?'selected':''}>${t}</option>`).join('');
    sel.onchange = () => applyPreset(side, shape, sel.value);
  }

  // fill inputs from preset
  function applyPreset(side, shape, val){
    if(val==='Custom…') return; // do nothing
    if(shape==='round'){
      const d = parseFloat(val.replace(/[^0-9.]/g,'')); // inches
      byId(side+'-d').value = state.unit==='in'? d : inToCm(d).toFixed(1);
    }else if(shape==='square'){
      const a = parseFloat(val.replace(/[^0-9.]/g,''));
      byId(side+'-a').value = state.unit==='in'? a : inToCm(a).toFixed(1);
    }else{
      const m = val.match(/([\d.]+)×([\d.]+)/);
      if(!m) return;
      const w = parseFloat(m[1]), h = parseFloat(m[2]);
      if(state.unit==='cm'){
        byId(side+'-w').value = inToCm(w).toFixed(1);
        byId(side+'-h').value = inToCm(h).toFixed(1);
      }else{
        byId(side+'-w').value = w;
        byId(side+'-h').value = h;
      }
    }
  }

  // read values and convert to inches for calc if needed
  function readDims(side, shape){
    const isCm = state.unit==='cm';
    if(shape==='round'){
      let d = parseFloat(byId(side+'-d').value||'0');
      if(isNaN(d)||d<=0) return null;
      if(isCm) d = cmToIn(d);
      return {d};
    }else if(shape==='square'){
      let a = parseFloat(byId(side+'-a').value||'0');
      if(isNaN(a)||a<=0) return null;
      if(isCm) a = cmToIn(a);
      return {a};
    }else{
      let w = parseFloat(byId(side+'-w').value||'0');
      let h = parseFloat(byId(side+'-h').value||'0');
      if([w,h].some(v=>isNaN(v)||v<=0)) return null;
      if(isCm){ w = cmToIn(w); h = cmToIn(h); }
      return {w,h};
    }
  }

  // calculate
  function calculate(){
    const sShape = byId('src-shape').value;
    const dShape = byId('dst-shape').value;
    const sDims = readDims('src', sShape);
    const dDims = readDims('dst', dShape);
    if(!sDims || !dDims){ alert('Please enter valid sizes for both pans.'); return; }
    const a1 = area[sShape](sDims);
    const a2 = area[dShape](dDims);
    const k = a2 / a1;
    const rounded = Math.round(k*100)/100;
    byId('k').textContent = rounded.toFixed(2);
    byId('k2').textContent = rounded.toFixed(2);
    byId('exact').textContent = `Exact: ${k.toFixed(3)}`;
    byId('out').hidden = false;
  }

  // unit toggle
  function setUnit(u){
    state.unit = u;
    byId('u-in').classList.toggle('active', u==='in');
    byId('u-cm').classList.toggle('active', u==='cm');
  }

  // init
  function init(){
    // build initial fields (default shapes: round/round)
    buildFields('src', byId('src-shape').value);
    buildFields('dst', byId('dst-shape').value);

    byId('src-shape').onchange = e => buildFields('src', e.target.value);
    byId('dst-shape').onchange = e => buildFields('dst', e.target.value);

    byId('calc').onclick = calculate;
    byId('clear').onclick = () => { document.querySelectorAll('input').forEach(i=>i.value=''); byId('out').hidden=true; };
    byId('u-in').onclick = ()=> setUnit('in');
    byId('u-cm').onclick = ()=> setUnit('cm');

    setUnit('in'); // default inches
  }
  init();
</script>
</body>
</html>

